<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blogging App</title>
    <link rel="stylesheet" href="assests/css/login_signup.css">
    <link rel="stylesheet" href="assests/css/main.css">
    <link rel="stylesheet" href="assests/css/responsive.css">
<body>
    
    <header>
        <!-- navbar start -->
        <nav class="navbar container-fluid">
            <a href="index.html"><h4>Blogging App</h4></a>
            <!-- <div>
                <a class="login_signup" href="signup.html">Signup</a>
                <a class="login_signup" id="logout">Logout</a>
            </div> -->
        </nav>
          <!-- navbar end -->
        <div class="container-fluid page-title">
            <h1>Login</h1>
        </div>
    </header>

    <section class="box">
        <form class="form">
            <input type="email" id="email" placeholder="Email" autocomplete="off">
            <input type="password" id="password" placeholder="Password">

            <button type="submit" id="login">Login</button>
            <a href="signup.html">Don't have an account?</a>
        </form>
    </section>

    <!-- firebase -->
    <script type="module">

    document.querySelector("form").addEventListener("submit", (event) =>{
     event.preventDefault();
    });

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import {
    getAuth,
    onAuthStateChanged,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";

    const firebaseConfig = {
    apiKey: "AIzaSyDjWgkEDZI6dPWbai_OJ6KLKI9A8l83m4I",
    authDomain: "blogapp-c7488.firebaseapp.com",
    projectId: "blogapp-c7488",
    storageBucket: "blogapp-c7488.appspot.com",
    messagingSenderId: "889483622671",
    appId: "1:889483622671:web:8eef199be7330f2418667a",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();

    document.getElementById("login").addEventListener("click", function () {
    let email = document.getElementById("email").value;
    let password = document.getElementById("password").value;

    // onAuthStateChanged(auth, (user)=>{
    //     if(!user){
    //         location.replace("index.html")
    //     }
    // });

    signInWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
        // Signed in
        const user = userCredential.user;
        console.log(user);
        alert(user.email + " Login successfully!!!");
        location.replace("dashboard.html")
        })
        .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log(errorMessage);
        alert(errorMessage);
        });
    });

    </script>

    <!-- javascript -->
    <script type="module" src="assests/js/firebase.js"></script>
    <!-- <script src="assests/js/main.js"></script> -->
</body>
</html>